<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LostOS: src/kernel/tables/gdt.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LostOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_cbd7f246bdf7dc0a50281a272327e6ed.html">kernel</a></li><li class="navelem"><a class="el" href="dir_5635d8e1c2eef429cf705abeccb2d78e.html">tables</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">gdt.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="gdt_8h_source.html">tables/gdt.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aaa7a7d6a41843f8a0c64fd66967feef4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gdt_8c.html#aaa7a7d6a41843f8a0c64fd66967feef4">gdt_init</a> ()</td></tr>
<tr class="memdesc:aaa7a7d6a41843f8a0c64fd66967feef4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a custom GDT in memory.  <a href="gdt_8c.html#aaa7a7d6a41843f8a0c64fd66967feef4">More...</a><br /></td></tr>
<tr class="separator:aaa7a7d6a41843f8a0c64fd66967feef4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fb93ca359948180801b0da7ab3c13c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gdt_8c.html#a7fb93ca359948180801b0da7ab3c13c3">gdt_setEntry</a> (int index, uint32_t <a class="el" href="idt_8h.html#a0523cedff47e2441fc198b7770ec5d3f">base</a>, uint64_t <a class="el" href="idt_8h.html#ab28e82ae69032cb4ad3ec3a0be3d7129">limit</a>, uint8_t <a class="el" href="gdt_8h.html#a8b0d6200bc639dd37ff68847a0adde5f">access</a>, uint8_t flags)</td></tr>
<tr class="separator:a7fb93ca359948180801b0da7ab3c13c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afe8eafa32241cf9a8f679b1bab48ad2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgdt__entry__t.html">gdt_entry_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gdt_8c.html#afe8eafa32241cf9a8f679b1bab48ad2d">gdt_entries</a> [<a class="el" href="gdt_8h.html#a671a8a7334ea602460efad38570c5e6a">DESCRIPTORS</a>]</td></tr>
<tr class="separator:afe8eafa32241cf9a8f679b1bab48ad2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a914e0ea1ca01a1cd99f8cb587ad9bdbe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgdt__descriptor__t.html">gdt_descriptor_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gdt_8c.html#a914e0ea1ca01a1cd99f8cb587ad9bdbe">gdt_ptr</a></td></tr>
<tr class="separator:a914e0ea1ca01a1cd99f8cb587ad9bdbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aaa7a7d6a41843f8a0c64fd66967feef4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa7a7d6a41843f8a0c64fd66967feef4">&#9670;&nbsp;</a></span>gdt_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gdt_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a custom GDT in memory. </p>
<p>The Global Descriptor Table (GDT) is a data structure used by Intel x86-family processors starting with the 80286 in order to define the characteristics of the various memory areas used during program execution, including the base address, the size, and access privileges like executability and writability.</p>
<p>These memory areas are called segments in Intel terminology.</p>
<p>All the segments are from 0x0 to 0xFFFFFFFF because I'm going to use paging, this structure is needed but not used.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="idt_8h.html#a88d4205d069421eb4f8e7577285f1180" title="Set the IDT in memory.">idt_init()</a> </dd></dl>
<p>Kernel CS (from 0 to 4GB). Access = 0x9A:</p><ul>
<li>1 present</li>
<li>00 ring 0</li>
<li>1 always 1</li>
<li>1 code segment</li>
<li>0 can be executed by ring lower or equal to DPL,</li>
<li>1 code segment is readable</li>
<li>0 access bit, always 0, cpu set this to 1 when accessing this sector Flags 0xCF:</li>
<li>1 If 0 the limit is in 1 B blocks (byte granularity), if 1 the limit is in 4 KiB blocks (page granularity).</li>
<li>1 If 0 the selector defines 16 bit protected mode. If 1 it defines 32 bit protected mode. You can have both 16 bit and 32 bit selectors at once.</li>
<li>0 0</li>
<li>0 0</li>
<li>1 1 1 1 &ndash; ignored</li>
</ul>
<p>Kernel DS (from 0 to 4GB). Access = 0x92:</p><ul>
<li>Only differ at the fifth bit(counting from least insignificant bit), 0 means it's a data segment.</li>
</ul>
<p>User CS and DS. Only differ in ring number (ring 3)</p>

</div>
</div>
<a id="a7fb93ca359948180801b0da7ab3c13c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fb93ca359948180801b0da7ab3c13c3">&#9670;&nbsp;</a></span>gdt_setEntry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gdt_setEntry </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>access</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function sets the bits of a gdt entry.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structgdt__entry__t.html">gdt_entry_t</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index of the GDT entry. </td></tr>
    <tr><td class="paramname">base</td><td>The starting address of the GDT entry. </td></tr>
    <tr><td class="paramname">limit</td><td>The last address of the GDT entry. </td></tr>
    <tr><td class="paramname">access</td><td>Kernel or User accessible. </td></tr>
    <tr><td class="paramname">flags</td><td>Flags. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="afe8eafa32241cf9a8f679b1bab48ad2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe8eafa32241cf9a8f679b1bab48ad2d">&#9670;&nbsp;</a></span>gdt_entries</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgdt__entry__t.html">gdt_entry_t</a> gdt_entries[<a class="el" href="gdt_8h.html#a671a8a7334ea602460efad38570c5e6a">DESCRIPTORS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a914e0ea1ca01a1cd99f8cb587ad9bdbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a914e0ea1ca01a1cd99f8cb587ad9bdbe">&#9670;&nbsp;</a></span>gdt_ptr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgdt__descriptor__t.html">gdt_descriptor_t</a> gdt_ptr</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
