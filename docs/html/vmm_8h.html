<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LostOS: src/include/mm/vmm.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LostOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b0856f6b0d80ccb263b2f415c91f9e17.html">include</a></li><li class="navelem"><a class="el" href="dir_53db11d0b79f6ec6ce9c87456d505222.html">mm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">vmm.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="system_8h_source.html">system.h</a>&gt;</code><br />
</div>
<p><a href="vmm_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae03d2c13c32e258037749223daece4a6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#ae03d2c13c32e258037749223daece4a6">BIT_PD_PT_PRESENT</a>&#160;&#160;&#160;0x00000001</td></tr>
<tr class="separator:ae03d2c13c32e258037749223daece4a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad41f9b118d96455fbb27da665cd3dd37"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#ad41f9b118d96455fbb27da665cd3dd37">BIT_PD_PT_RW</a>&#160;&#160;&#160;0x00000002</td></tr>
<tr class="separator:ad41f9b118d96455fbb27da665cd3dd37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60ebcb496814df5cc99c4a20e49d04a9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#a60ebcb496814df5cc99c4a20e49d04a9">BIT_PD_PT_USER</a>&#160;&#160;&#160;0x00000004</td></tr>
<tr class="separator:a60ebcb496814df5cc99c4a20e49d04a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a515f60a56f365e3c24bd3970a88a9f4a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#a515f60a56f365e3c24bd3970a88a9f4a">BIT_PD_PT_PWT</a>&#160;&#160;&#160;0x00000008</td></tr>
<tr class="separator:a515f60a56f365e3c24bd3970a88a9f4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ab3ba38ce507d85d42c34bde2d6e13d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#a2ab3ba38ce507d85d42c34bde2d6e13d">BIT_PD_PT_PCD</a>&#160;&#160;&#160;0x00000010</td></tr>
<tr class="separator:a2ab3ba38ce507d85d42c34bde2d6e13d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a2e7ef3358301de3176116c80469bf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#a78a2e7ef3358301de3176116c80469bf">BIT_PD_PT_ACCESSED</a>&#160;&#160;&#160;0x00000020</td></tr>
<tr class="separator:a78a2e7ef3358301de3176116c80469bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f5d3841f166819c0246cbb2133466dc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#a4f5d3841f166819c0246cbb2133466dc">BIT_PD_PT_DIRTY</a>&#160;&#160;&#160;0x00000040</td></tr>
<tr class="separator:a4f5d3841f166819c0246cbb2133466dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc48f34ed9dce9982033ad378bf36167"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#abc48f34ed9dce9982033ad378bf36167">BIT_PD_PAGE_SIZE</a>&#160;&#160;&#160;0x00000080</td></tr>
<tr class="separator:abc48f34ed9dce9982033ad378bf36167"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac47fbf9bab578f320dca174406c7ef73"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#ac47fbf9bab578f320dca174406c7ef73">PD_VADDR</a>&#160;&#160;&#160;0xFFFFF000</td></tr>
<tr class="separator:ac47fbf9bab578f320dca174406c7ef73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a765e49bb44f4a375c759e32858e0550e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#a765e49bb44f4a375c759e32858e0550e">PT_BASE_VADDR</a>&#160;&#160;&#160;0xFFC00000</td></tr>
<tr class="separator:a765e49bb44f4a375c759e32858e0550e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85667266356c19d0afdcf9a0cf4e1c75"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#a85667266356c19d0afdcf9a0cf4e1c75">PAGE_DIRECTORY_ADDR_OFFSET</a>&#160;&#160;&#160;22</td></tr>
<tr class="separator:a85667266356c19d0afdcf9a0cf4e1c75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a372f607fae734427231339549f7b3856"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#a372f607fae734427231339549f7b3856">PAGE_TABLE_ADDR_OFFSET</a>&#160;&#160;&#160;12</td></tr>
<tr class="separator:a372f607fae734427231339549f7b3856"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a877752f604817d711c82889f7ded52b8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#a877752f604817d711c82889f7ded52b8">PAGE_DIRECTORY_INDEX</a>(<a class="el" href="vga_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>)&#160;&#160;&#160;(((<a class="el" href="vga_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) &gt;&gt; <a class="el" href="vmm_8h.html#a85667266356c19d0afdcf9a0cf4e1c75">PAGE_DIRECTORY_ADDR_OFFSET</a>) &amp; 0x3ff)</td></tr>
<tr class="separator:a877752f604817d711c82889f7ded52b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a736011ad6043805b1e3db9e889b149"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#a9a736011ad6043805b1e3db9e889b149">PAGE_TABLE_INDEX</a>(<a class="el" href="vga_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>)&#160;&#160;&#160;(((<a class="el" href="vga_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) &gt;&gt; <a class="el" href="vmm_8h.html#a372f607fae734427231339549f7b3856">PAGE_TABLE_ADDR_OFFSET</a>) &amp; 0x3ff)</td></tr>
<tr class="separator:a9a736011ad6043805b1e3db9e889b149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a580ade9f59adcb10c12550e6b38295fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#a580ade9f59adcb10c12550e6b38295fd">PAGE_GET_PHYSICAL_ADDRESS</a>(<a class="el" href="vga_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>)&#160;&#160;&#160;(*<a class="el" href="vga_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> &amp; ~0xfff)</td></tr>
<tr class="separator:a580ade9f59adcb10c12550e6b38295fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adef373f9b9c3be4e9176224263fa4335"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#adef373f9b9c3be4e9176224263fa4335">vmm_init</a> ()</td></tr>
<tr class="memdesc:adef373f9b9c3be4e9176224263fa4335"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Virtual Memory Manager is going to start and handle paging in the system.  <a href="vmm_8h.html#adef373f9b9c3be4e9176224263fa4335">More...</a><br /></td></tr>
<tr class="separator:adef373f9b9c3be4e9176224263fa4335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb06b7c4006a14240ac29a3ede114daf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#acb06b7c4006a14240ac29a3ede114daf">vMapPage</a> (void *phys, void *virt, uint32_t flags)</td></tr>
<tr class="separator:acb06b7c4006a14240ac29a3ede114daf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a409b57cb773a4d7a57f99db96b204788"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#a409b57cb773a4d7a57f99db96b204788">vUnmapPage</a> (void *virt)</td></tr>
<tr class="separator:a409b57cb773a4d7a57f99db96b204788"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cff7f27869ced78fdc69df1e0e84cfd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmm_8h.html#a2cff7f27869ced78fdc69df1e0e84cfd">set_cr3</a> (uint32_t *pd_phys_addr)</td></tr>
<tr class="separator:a2cff7f27869ced78fdc69df1e0e84cfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="abc48f34ed9dce9982033ad378bf36167"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc48f34ed9dce9982033ad378bf36167">&#9670;&nbsp;</a></span>BIT_PD_PAGE_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_PD_PAGE_SIZE&#160;&#160;&#160;0x00000080</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a78a2e7ef3358301de3176116c80469bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78a2e7ef3358301de3176116c80469bf">&#9670;&nbsp;</a></span>BIT_PD_PT_ACCESSED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_PD_PT_ACCESSED&#160;&#160;&#160;0x00000020</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4f5d3841f166819c0246cbb2133466dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f5d3841f166819c0246cbb2133466dc">&#9670;&nbsp;</a></span>BIT_PD_PT_DIRTY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_PD_PT_DIRTY&#160;&#160;&#160;0x00000040</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2ab3ba38ce507d85d42c34bde2d6e13d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ab3ba38ce507d85d42c34bde2d6e13d">&#9670;&nbsp;</a></span>BIT_PD_PT_PCD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_PD_PT_PCD&#160;&#160;&#160;0x00000010</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae03d2c13c32e258037749223daece4a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae03d2c13c32e258037749223daece4a6">&#9670;&nbsp;</a></span>BIT_PD_PT_PRESENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_PD_PT_PRESENT&#160;&#160;&#160;0x00000001</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a515f60a56f365e3c24bd3970a88a9f4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a515f60a56f365e3c24bd3970a88a9f4a">&#9670;&nbsp;</a></span>BIT_PD_PT_PWT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_PD_PT_PWT&#160;&#160;&#160;0x00000008</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad41f9b118d96455fbb27da665cd3dd37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad41f9b118d96455fbb27da665cd3dd37">&#9670;&nbsp;</a></span>BIT_PD_PT_RW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_PD_PT_RW&#160;&#160;&#160;0x00000002</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a60ebcb496814df5cc99c4a20e49d04a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60ebcb496814df5cc99c4a20e49d04a9">&#9670;&nbsp;</a></span>BIT_PD_PT_USER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_PD_PT_USER&#160;&#160;&#160;0x00000004</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a85667266356c19d0afdcf9a0cf4e1c75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85667266356c19d0afdcf9a0cf4e1c75">&#9670;&nbsp;</a></span>PAGE_DIRECTORY_ADDR_OFFSET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAGE_DIRECTORY_ADDR_OFFSET&#160;&#160;&#160;22</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a877752f604817d711c82889f7ded52b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a877752f604817d711c82889f7ded52b8">&#9670;&nbsp;</a></span>PAGE_DIRECTORY_INDEX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAGE_DIRECTORY_INDEX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="vga_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;(((<a class="el" href="vga_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) &gt;&gt; <a class="el" href="vmm_8h.html#a85667266356c19d0afdcf9a0cf4e1c75">PAGE_DIRECTORY_ADDR_OFFSET</a>) &amp; 0x3ff)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a580ade9f59adcb10c12550e6b38295fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a580ade9f59adcb10c12550e6b38295fd">&#9670;&nbsp;</a></span>PAGE_GET_PHYSICAL_ADDRESS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAGE_GET_PHYSICAL_ADDRESS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="vga_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;(*<a class="el" href="vga_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> &amp; ~0xfff)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a372f607fae734427231339549f7b3856"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a372f607fae734427231339549f7b3856">&#9670;&nbsp;</a></span>PAGE_TABLE_ADDR_OFFSET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAGE_TABLE_ADDR_OFFSET&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9a736011ad6043805b1e3db9e889b149"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a736011ad6043805b1e3db9e889b149">&#9670;&nbsp;</a></span>PAGE_TABLE_INDEX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAGE_TABLE_INDEX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="vga_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;(((<a class="el" href="vga_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) &gt;&gt; <a class="el" href="vmm_8h.html#a372f607fae734427231339549f7b3856">PAGE_TABLE_ADDR_OFFSET</a>) &amp; 0x3ff)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac47fbf9bab578f320dca174406c7ef73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac47fbf9bab578f320dca174406c7ef73">&#9670;&nbsp;</a></span>PD_VADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PD_VADDR&#160;&#160;&#160;0xFFFFF000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a765e49bb44f4a375c759e32858e0550e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a765e49bb44f4a375c759e32858e0550e">&#9670;&nbsp;</a></span>PT_BASE_VADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PT_BASE_VADDR&#160;&#160;&#160;0xFFC00000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2cff7f27869ced78fdc69df1e0e84cfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cff7f27869ced78fdc69df1e0e84cfd">&#9670;&nbsp;</a></span>set_cr3()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_cr3 </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>pd_phys_addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acb06b7c4006a14240ac29a3ede114daf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb06b7c4006a14240ac29a3ede114daf">&#9670;&nbsp;</a></span>vMapPage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vMapPage </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>phys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>virt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The CPU pushes an error code on the stack before firing a page fault exception. The error code must be analyzed by the exception handler to determine how to handle the exception. The bottom 3 bits of the exception code are the only ones used, bits 3-31 are reserved.</p>
<p>The combination of these flags specify the details of the Page Fault and indicate what action to take:</p>
<p>US RW P - Description 0 0 0 - Supervisory process tried to read a non-present page entry 0 0 1 - Supervisory process tried to read a page and caused a protection fault 0 1 0 - Supervisory process tried to write to a non-present page entry 0 1 1 - Supervisory process tried to write a page and caused a protection fault 1 0 0 - User process tried to read a non-present page entry 1 0 1 - User process tried to read a page and caused a protection fault 1 1 0 - User process tried to write to a non-present page entry 1 1 1 - User process tried to write a page and caused a protection fault Mapping a virtual address to a physical one.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phys</td><td>Physical address to map. </td></tr>
    <tr><td class="paramname">virt</td><td>Virtual address to map phys to. </td></tr>
    <tr><td class="paramname">flags</td><td>Flags.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If everything went well. </dd></dl>

</div>
</div>
<a id="adef373f9b9c3be4e9176224263fa4335"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adef373f9b9c3be4e9176224263fa4335">&#9670;&nbsp;</a></span>vmm_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vmm_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The Virtual Memory Manager is going to start and handle paging in the system. </p>
<p>Paging is a system which allows each process to see a full virtual address space, without actually requiring the full amount of physical memory to be available or present. Maximum address space for 32 bit systems like this is 4GB.</p>
<p>The topmost paging structure is the PAGE DIRECTORY. It is essentially an array of page directory entries that take the following form:</p><ul>
<li>31_12 Page Table 4KB aligned address</li>
<li>11_8 Available</li>
<li>7_0 Flags<ul>
<li>7 G_Ignored</li>
<li>6 S_Page_Size</li>
<li>5 A_Accessed</li>
<li>4 D_Cache_Disable</li>
<li>3 W_Write_Through</li>
<li>2 U_User\Supervisor</li>
<li>1 R_Read\Write</li>
<li>0 P_Present</li>
</ul>
</li>
</ul>
<p>In each PAGE TABLE, as it is, there are also 1024 entries. These are called page table entries, and are very similar to page directory entries:</p><ul>
<li>31_12 Physical Page 4KB aligned address</li>
<li>11_9 Available</li>
<li>7_0 Flags<ul>
<li>7 G_Global</li>
<li>6 D_Dirty</li>
<li>5 A_Accessed</li>
<li>4 D_Cache_Disable</li>
<li>3 W_Write_Through</li>
<li>2 U_User\Supervisor</li>
<li>1 R_Read\Write</li>
<li>0 P_Present</li>
</ul>
</li>
</ul>
<p>This is the format of a 32 bit x86 virtual address: AAAAAAAAAA BBBBBBBBBB CCCCCCCCCCCC directory index page table index offset into page </p>
<p>Using the 'recursive mapping' technique. It consists in mapping the last entry in the page directory to the page directory iteself. The physical address of the page directory is in the registry 'cr3' and it's more helpful having it at the virtual address 0xFFFFF000.</p>
<p>This becomes more important when each process gets its own page directory, which can be anywhere in memory.</p>

</div>
</div>
<a id="a409b57cb773a4d7a57f99db96b204788"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a409b57cb773a4d7a57f99db96b204788">&#9670;&nbsp;</a></span>vUnmapPage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vUnmapPage </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>virt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unmapping the virtual address from the current page directory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">virt</td><td>Virtual address to unmap. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
